<!doctype html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="styles.css" />
		<script type="text/javascript" src="/homey.js" data-origin="settings"></script>
		<script type="text/javascript" src="/manager/webserver/assets/js/jquery.js"></script>
		<script type="text/javascript" src="settings.js" data-origin="settings"></script>
		</head>
	<body>
		<div id="app">
			<p data-i18n="settings.benefit" class="benefit">Monitor and Control plugwise</p>
			<div class="rTable tabs">
				<div class="rTableRow">
					<div id="tabb1" class="tab tab-inactive" onclick="showTab(1)" data-i18n="settings.tab1.title">Instructions</div>
					<div id="tabb2" class="tab tab-inactive" onclick="showTab(2)" data-i18n="settings.tab2.title">App Settings</div>
					<div id="tabb3" class="tab tab-inactive" onclick="showTab(3)" data-i18n="settings.tab3.title">PW2Py</div>
					<div id="tabb4" class="tab tab-inactive" onclick="showTab(4)" data-i18n="settings.tab4.title">Log</div>
				</div>
			</div>
			<div class="tab-content">
				<div style="height:8px" class="panel"></div>

				<!-- Instructions panel -->
				<div id="tab1" class="panel" style="display: none;">
					<fieldset class="listContainer">
						<legend data-i18n="settings.tab1.appDescriptionTitle">About this app</legend>
						<p data-i18n="settings.tab1.appDescription" class="instructions">Description</p>
					</fieldset>
					<fieldset class="listContainer">
						<legend data-i18n="settings.tab1.pw2pySetupTitle">Setup PW2Py</legend>
						<p data-i18n="settings.tab1.pw2pySetupInstructions" class="instructions">Instructions</p>
					</fieldset>
					<fieldset class="listContainer">
						<legend data-i18n="settings.tab1.addDeviceTitle">Add circles to Homey</legend>
						<p data-i18n="settings.tab1.addDeviceInstructions" class="instructions">Instructions</p>
					</fieldset>
				</div>

				<!-- App settings panel -->
				<div id="tab2" class="panel" style="display: none;">
					<label class="settings-item-description" data-i18n="settings.tab2.ip_mqtt">MQTT IP</label>
					<div class="settings-itemgroup">
						<input id="ip_mqtt" type="text" value="">
					</div>
					<label class="settings-item-description" data-i18n="settings.tab2.port_mqtt">MQTT Port</label>
					<div class="settings-itemgroup">
						<input id="port_mqtt" type="text" value="1883">
					</div>

					<label class="settings-item-description" data-i18n="settings.tab2.tls_mqtt">Use TLS</label>
					<div class="settings-item-last">
							<label class="form-switch">
									<input type="checkbox" id="tls_mqtt">
									<i></i>
							</label>
					</div>

					<label class="settings-item-description" data-i18n="settings.tab2.username_mqtt">Username</label>
					<div class="settings-itemgroup">
						<input id="username_mqtt" type="text" value="">
					</div>
					<label class="settings-item-description" data-i18n="settings.tab2.password_mqtt">Password</label>
					<div class="settings-itemgroup">
						<input id="password_mqtt" type="password" value="">
					</div>
					<label class="settings-item-description" data-i18n="settings.tab2.test">Test</label>
					<button id="test" class="btn" onclick="test()" data-i18n="settings.tab2.test">Test</button>
					<label class="settings-item-description" data-i18n="settings.tab2.save">Save</label>
					<button id="save" class="btn" onclick="saveMqtt()" data-i18n="settings.tab2.save">Save</button>
					
				</div>

				<!-- PW2Py control panel -->
				<div id="tab3" class="panel" style="display: none;">
					<div class="setting">
						<label class="settings-item-description" data-i18n="settings.tab3.openControlURL"></label>
						<button id="control_url" class="btn" onclick="openUrl('/')" data-i18n="settings.tab3.openControlURL">OpenControlUrl</button>
					</div>
					<div class="setting">
						<label class="settings-item-description" data-i18n="settings.tab3.openSettingsURL"></label>
						<button id="settings_url" class="btn" onclick="openUrl('/cfg-pw2py.html')" data-i18n="settings.tab3.openSettingsURL">OpenSettingsUrl</button>
					</div>	
					<label class="settings-item-description" data-i18n="settings.tab3.ip_pw2py">PW2Py IP</label>
					<div class="settings-itemgroup">
						<input id="ip_pw2py" type="text" value="">
					</div>
					<label class="settings-item-description" data-i18n="settings.tab3.port_pw2py">PW2Py Port</label>
					<div class="settings-itemgroup">
						<input id="port_pw2py" type="text" value="8000">
					</div>
					<label class="settings-item-description" data-i18n="settings.tab3.save">Save</label>
					<button id="save" class="btn" onclick="savePw2py()" data-i18n="settings.tab2.save">Save</button>
				</div>

				<!-- Logging panel -->
				<div id="tab4" class="panel">
					<div class="setting">
						<label class="settings-item-description" data-i18n="settings.tab4.deleteLogs">Delete</label>
						<button id="deleteButton" class="btn" onclick="deleteLogs()" data-i18n="settings.tab4.deleteLogs">Delete</button>
						<div id="loglines" class="instructions"></div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>

